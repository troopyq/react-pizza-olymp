{"version":3,"sources":["component/Button/Button.jsx","assets/icon/logo.png","assets/icon/cart.png","component/Header/Header.jsx","component/Product/Product.jsx","component/ProductCart/ProductCart.jsx","component/FormCart/FormCart.jsx","pages/CartPage.jsx","pages/MainPage.jsx","App.js","reportWebVitals.js","store/cartReducer.js","store/index.js","index.js"],"names":["Button","children","className","type","props","Header","useDispatch","total","useSelector","state","newTotal","exact","to","src","logo","alt","cart","Product","name","img","id","price","dispatch","onClick","payload","addToCart","ProductCart","amount","removeCart","console","log","addCart","FormCart","oldTotal","discounts","delivery","action","method","placeholder","min","d","Date","getFullYear","getMonth","slice","getDate","filter","disc","used","length","map","text","sum","CartPage","cartList","MainPage","productsList","products","product","App","setStateToLocalStorage","localStorage","setItem","JSON","stringify","window","removeEventListener","useEffect","parse","getItem","path","element","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","defaultState","condition","calcTotal","newDiscounts","forEach","Math","floor","store","createStore","find","el","productCart","push","calc","composeWithDevTools","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4b34c577.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport const Button = ({ children, className, type = 'outline', ...props }) => {\r\n\treturn (\r\n\t\t<div {...props} className={`button button_${type} ${className}`}>\r\n\t\t\t{children}\r\n\t\t</div>\r\n\t);\r\n};\r\n","export default __webpack_public_path__ + \"static/media/logo.49776df1.png\";","export default __webpack_public_path__ + \"static/media/cart.dd75d311.png\";","import React from 'react';\r\n\r\nimport logo from '../../assets/icon/logo.png';\r\nimport cart from '../../assets/icon/cart.png';\r\nimport '../../assets/style/index.scss';\r\nimport { Button } from '..';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nexport const Header = () => {\r\n\tconst dispatch = useDispatch();\r\n\tconst total = useSelector((state) => state.newTotal);\r\n\r\n\treturn (\r\n\t\t<header className='header'>\r\n\t\t\t<NavLink exact to='/'>\r\n\t\t\t\t<div className='logo'>\r\n\t\t\t\t\t<img src={logo} className='logo__img' alt='logo' />\r\n\t\t\t\t\t<span className='logo__name'>React Pizza</span>\r\n\t\t\t\t</div>\r\n\t\t\t</NavLink>\r\n\r\n\t\t\t<NavLink exact to='/'>\r\n\t\t\t\t<span className='menu-item'>Католог</span>\r\n\t\t\t</NavLink>\r\n\r\n\t\t\t<NavLink exact to='/cart'>\r\n\t\t\t\t<Button className='cart'>\r\n\t\t\t\t\t<img className='cart__img' src={cart} alt='cart-img' />\r\n\t\t\t\t\t<span className='total'>{total} р.</span>\r\n\t\t\t\t</Button>\r\n\t\t\t</NavLink>\r\n\t\t</header>\r\n\t);\r\n};\r\n","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Button } from '..';\r\n\r\nexport const Product = ({ name, img, id, price }) => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tfunction addToCart(id) {\r\n\t\tdispatch({\r\n\t\t\ttype: 'ADD_TO_CART',\r\n\t\t\tpayload: id,\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='product'>\r\n\t\t\t<img className='product__img' src={img} alt={name} />\r\n\t\t\t<div className='product__content'>\r\n\t\t\t\t<h3 className='product__name'>{name}</h3>\r\n\r\n\t\t\t\t<Button className='product__price' onClick={() => addToCart(id)} type='outline'>\r\n\t\t\t\t\t{price} р.\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Button } from '..';\r\n\r\nimport '../../assets/style/index.scss';\r\n\r\nexport const ProductCart = ({ name, img, id, price, amount }) => {\r\n\tconst dispatch = useDispatch();\r\n\r\n\tfunction addCart(id) {\r\n\t\tdispatch({\r\n\t\t\ttype: 'ADD_TO_CART',\r\n\t\t\tpayload: id,\r\n\t\t});\r\n\t}\r\n\tfunction removeCart(id) {\r\n\t\tdispatch({\r\n\t\t\ttype: 'REMOVE_FROM_CART',\r\n\t\t\tpayload: id,\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='product__cart'>\r\n\t\t\t<img className='product__img' src={img} alt={name} />\r\n\t\t\t<div className='product__content'>\r\n\t\t\t\t<h3 className='product__name'>{name}</h3>\r\n\t\t\t</div>\r\n\t\t\t<div className='product__control'>\r\n\t\t\t\t<Button onClick={() => removeCart(id)}>-</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName='product__price'\r\n\t\t\t\t\tonClick={() => console.log('amount: ' + amount)}\r\n\t\t\t\t\ttype='outline'>\r\n\t\t\t\t\t{amount || 0} | {price * amount} р.\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button onClick={() => addCart(id)}>+</Button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Button } from '..';\r\n\r\nexport const FormCart = () => {\r\n\tconst total = useSelector((state) => state.newTotal);\r\n\tconst oldTotal = useSelector((state) => state.total);\r\n\tconst discounts = useSelector((state) => state.discounts);\r\n\tconst delivery = useSelector((state) => state.delivery);\r\n\r\n\tfunction getDate() {\r\n\t\tconst d = new Date();\r\n\r\n\t\tconst date =\r\n\t\t\td.getFullYear() +\r\n\t\t\t'-' +\r\n\t\t\t('0' + (d.getMonth() + 1)).slice(-2) +\r\n\t\t\t'-' +\r\n\t\t\t('0' + d.getDate()).slice(-2);\r\n\r\n\t\treturn date;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className='form-block'>\r\n\t\t\t<form className='form-cart' action='/' method='POST'>\r\n\t\t\t\t<input id='city' type='text' name='city' placeholder='Город' />\r\n\t\t\t\t<input id='adress' type='text' name='adress' placeholder='Адрес' />\r\n\r\n\t\t\t\t<input id='date' type='date' name='date' min={getDate()} />\r\n\r\n\t\t\t\t<input type='time' name='time' />\r\n\r\n\t\t\t\t<p className='discounts'>\r\n\t\t\t\t\t{discounts.filter((disc) => disc.used).length\r\n\t\t\t\t\t\t? 'Были применены скидки:'\r\n\t\t\t\t\t\t: 'Для получение скидок закажите на большую сумму'}\r\n\t\t\t\t\t{discounts.map((disc, id) => {\r\n\t\t\t\t\t\tif (disc.used)\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<p key={disc.id}>\r\n\t\t\t\t\t\t\t\t\t{id + 1}. {disc.text}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t<p className='devilery-desc'>\r\n\t\t\t\t\t\tДоставка {delivery.used ? delivery.sum : 0}р. Для бесплатной доставки закажите на сумму\r\n\t\t\t\t\t\tот 1000р без учета доставки.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t<p className='total-text'>\r\n\t\t\t\t\tСумма к оплате <span className='total-price'>{total} р.</span>\r\n\t\t\t\t\t{discounts.filter((disc) => disc.used).length ? (\r\n\t\t\t\t\t\t<span className='total-old-price'>{oldTotal} р.</span>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t''\r\n\t\t\t\t\t)}\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t<Button type='fill'>Заказать</Button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport '../assets/style/index.scss';\r\nimport { FormCart, ProductCart } from '../component';\r\n\r\nexport const CartPage = () => {\r\n\tconst cartList = useSelector((state) => state.cart);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{cartList.length > 0 ? (\r\n\t\t\t\t<main className='main cart__content'>\r\n\t\t\t\t\t{cartList.map((cart) => {\r\n\t\t\t\t\t\tif (cart) return <ProductCart key={cart.id} {...cart} />;\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t<FormCart />\r\n\t\t\t\t</main>\r\n\t\t\t) : (\r\n\t\t\t\t<main className='main cart__content'>\r\n\t\t\t\t\t<h2>Корзина пуста</h2>\r\n\t\t\t\t</main>\r\n\t\t\t)}\r\n\t\t</>\r\n\t);\r\n};\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport '../assets/style/index.scss';\r\nimport { Product } from '../component';\r\n\r\nexport const MainPage = () => {\r\n\tconst productsList = useSelector((state) => state.products);\r\n\r\n\treturn (\r\n\t\t<main className='main'>\r\n\t\t\t<h2>Пицца</h2>\r\n\t\t\t<div className='product__list'>\r\n\t\t\t\t{productsList.map((product) => {\r\n\t\t\t\t\tif (product.type === 'PIZZA') return <Product key={product.id} {...product} />;\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t\t<h2>Курица</h2>\r\n\t\t\t<div className='product__list'>\r\n\t\t\t\t{productsList.map((product) => {\r\n\t\t\t\t\tif (product.type === 'CHIKEN') return <Product key={product.id} {...product} />;\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</main>\r\n\t);\r\n};\r\n","import React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useDispatch } from 'react-redux';\nimport { HashRouter, Routes, Route, Link } from 'react-router-dom';\n\nimport './assets/style/index.scss';\nimport { Header } from './component';\nimport { CartPage } from './pages/CartPage';\nimport { MainPage } from './pages/MainPage';\n\nfunction App() {\n\tconst dispatch = useDispatch();\n\tconst state = useSelector((state) => state);\n\n\tconst setStateToLocalStorage = () => {\n\t\tconsole.log(state);\n\t\tlocalStorage.setItem('state', JSON.stringify(state));\n\t\twindow.removeEventListener('beforeunload', setStateToLocalStorage);\n\t};\n\n\tuseEffect(() => {\n\t\tsetStateToLocalStorage();\n\t}, [state]);\n\n\tuseEffect(() => {\n\t\tdispatch({ type: 'SET_STATE', payload: JSON.parse(localStorage.getItem('state')) });\n\t\treturn () => {\n\t\t\tsetStateToLocalStorage();\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<HashRouter>\n\t\t\t<div className='App'>\n\t\t\t\t<div className='wrapper'>\n\t\t\t\t\t<Header />\n\n\t\t\t\t\t<Routes>\n\t\t\t\t\t\t<Route exact='true' path='/' element={<MainPage />}></Route>\n\t\t\t\t\t\t<Route exact='true' path='/cart' element={<CartPage />}></Route>\n\t\t\t\t\t</Routes>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</HashRouter>\n\t);\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","const defaultState = {\r\n\tcart: [],\r\n\ttotal: 0,\r\n\tnewTotal: 0,\r\n\tdelivery: {\r\n\t\tsum: 300,\r\n\t\tused: false,\r\n\t},\r\n\tdiscounts: [\r\n\t\t{\r\n\t\t\tid: '1disc',\r\n\t\t\ttype: 'sum',\r\n\t\t\tsum: 300,\r\n\t\t\tcondition: 1000,\r\n\t\t\tused: false,\r\n\t\t\ttext: 'Доставка от 1000р. БЕСПЛАТНА',\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: '2disc',\r\n\t\t\ttype: 'percent',\r\n\t\t\tsum: 10,\r\n\t\t\tcondition: 2000,\r\n\t\t\tused: false,\r\n\t\t\ttext: 'Доставка от 2000р. дает скидку 10%',\r\n\t\t},\r\n\t],\r\n\tproducts: [\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\ttype: 'PIZZA',\r\n\t\t\tname: 'Пицца Пепперони',\r\n\t\t\tprice: 299,\r\n\t\t\timg: 'https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/477350/dish_large_______-____-1023x432-pizza-full_0005__________.png',\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\ttype: 'PIZZA',\r\n\t\t\tname: 'Пицца 4 Сыра',\r\n\t\t\tprice: 699,\r\n\t\t\timg: 'https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/477351/dish_large_______-____-1023x432-pizza-full_0004_______.png',\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 3,\r\n\t\t\ttype: 'PIZZA',\r\n\t\t\tname: 'Пицца Баварская',\r\n\t\t\tprice: 499,\r\n\t\t\timg: 'https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/479638/dish_large_______-____-1023x432-pizza-full_0006__________.jpg',\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 4,\r\n\t\t\ttype: 'PIZZA',\r\n\t\t\tname: 'Пицца Греческая',\r\n\t\t\tprice: 699,\r\n\t\t\timg: 'https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/477353/dish_large_______-____-1023x432-_________-UPD2.png',\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 5,\r\n\t\t\ttype: 'PIZZA',\r\n\t\t\tname: 'Пицца Хот-Дог',\r\n\t\t\tprice: 599,\r\n\t\t\timg: 'https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/477354/dish_large_______-____-1023x432-___-___-UPD.png',\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 6,\r\n\t\t\ttype: 'PIZZA',\r\n\t\t\tname: 'Пицца 2 в 1',\r\n\t\t\tprice: 899,\r\n\t\t\timg: 'https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/479635/dish_large_______-____-1023x432-pizza-2-in-1.jpg',\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 7,\r\n\t\t\ttype: 'PIZZA',\r\n\t\t\tname: 'Пицца Деревенская',\r\n\t\t\tprice: 499,\r\n\t\t\timg: 'https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/479637/dish_large_______-____-1023x432-pizza-full_0002____________-_-_______.jpg',\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 8,\r\n\t\t\ttype: 'CHIKEN',\r\n\t\t\tname: 'Филе куриное 3 шт',\r\n\t\t\tprice: 149,\r\n\t\t\timg: 'https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/477338/dish_large________-____-3__.jpg',\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 9,\r\n\t\t\ttype: 'CHIKEN',\r\n\t\t\tname: 'Наггетсы куриные 5 шт',\r\n\t\t\tprice: 99,\r\n\t\t\timg: 'https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/477340/dish_large_________-5__.jpg',\r\n\t\t},\r\n\t],\r\n};\r\n\r\nexport const cartReducer = (state = defaultState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase 'ADD_TO_CART': {\r\n\t\t\tconst product = state.products.find((el) => el.id === action.payload);\r\n\t\t\tconst cart = state.cart;\r\n\t\t\tconst productCart = cart.find((el) => el.id === action.payload);\r\n\t\t\tif (productCart) {\r\n\t\t\t\tproductCart.amount += 1;\r\n\t\t\t} else {\r\n\t\t\t\tproduct.amount = 1;\r\n\t\t\t\tcart.push(product);\r\n\t\t\t}\r\n\r\n\t\t\tconst total = state.total + product.price;\r\n\t\t\tconst calc = calcTotal(total, state, cart);\r\n\t\t\treturn { ...state, cart, total: total, newTotal: calc.total, discounts: calc.discounts };\r\n\t\t}\r\n\t\tcase 'REMOVE_FROM_CART': {\r\n\t\t\tconst product = state.products.find((el) => el.id === action.payload);\r\n\t\t\tlet cart = state.cart;\r\n\t\t\tcart = cart.map((el) => {\r\n\t\t\t\tif (el.id === action.payload) {\r\n\t\t\t\t\tif (el.amount > 0) {\r\n\t\t\t\t\t\t--el.amount;\r\n\t\t\t\t\t\treturn el;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (el.amount <= 1) return;\r\n\t\t\t\t}\r\n\t\t\t\treturn el;\r\n\t\t\t});\r\n\t\t\tcart = cart.filter((el) => {\r\n\t\t\t\tif (!el) return;\r\n\t\t\t\tif (el.id === action.payload) {\r\n\t\t\t\t\tif (el.amount === 0) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tconsole.log(cart);\r\n\r\n\t\t\tconst total = state.total - product.price;\r\n\r\n\t\t\tconst calc = calcTotal(total, state, cart);\r\n\t\t\treturn { ...state, cart, total: total, newTotal: calc.total, discounts: calc.discounts };\r\n\t\t}\r\n\r\n\t\tcase 'SET_STATE': {\r\n\t\t\tconsole.log(action.payload);\r\n\t\t\tif (action.payload) {\r\n\t\t\t\treturn { ...action.payload };\r\n\t\t\t}\r\n\t\t\treturn { ...state };\r\n\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nfunction calcTotal(total, state, cart) {\r\n\tlet newTotal = total;\r\n\tlet newDiscounts = state.discounts;\r\n\r\n\tnewDiscounts.forEach((disc) => {\r\n\t\tif (cart.length > 0) {\r\n\t\t\tif (disc.type === 'sum') {\r\n\t\t\t\tif (newTotal >= disc.condition) {\r\n\t\t\t\t\tdisc.used = true;\r\n\t\t\t\t\tstate.delivery.used = false;\r\n\t\t\t\t} else if (newTotal < disc.condition) {\r\n\t\t\t\t\tnewTotal += state.delivery.sum;\r\n\r\n\t\t\t\t\tstate.delivery.used = true;\r\n\t\t\t\t\tdisc.used = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (disc.type === 'percent') {\r\n\t\t\t\tif (newTotal >= disc.condition) {\r\n\t\t\t\t\tnewTotal -= Math.floor((newTotal / 100) * disc.sum);\r\n\t\t\t\t\tdisc.used = true;\r\n\t\t\t\t} else if (newTotal < disc.condition) {\r\n\t\t\t\t\tdisc.used = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconsole.log('prev total: ' + total);\r\n\t\t\tconsole.log('new total: ' + newTotal);\r\n\t\t} else if (cart.length === 0) {\r\n\t\t\tstate.delivery.used = false;\r\n\t\t}\r\n\t});\r\n\r\n\treturn { total: newTotal, discounts: newDiscounts };\r\n}\r\n","import { createStore } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport { cartReducer } from './cartReducer';\r\n\r\nexport const store = createStore(cartReducer, composeWithDevTools());\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport { store } from './store';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Provider store={store}>\n\t\t\t<App />\n\t\t</Provider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
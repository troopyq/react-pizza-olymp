(this["webpackJsonpreact-pizza-olymp"]=this["webpackJsonpreact-pizza-olymp"]||[]).push([[0],{21:function(t,e,c){},29:function(t,e,c){"use strict";c.r(e);var a=c(0),n=c.n(a),s=c(9),i=c.n(s),o=(c(21),c(3)),r=c(7),d=c(2),l=(c(8),c(4)),_=c(16),u=c(1),p=["children","className","type"],m=function(t){var e=t.children,c=t.className,a=t.type,n=void 0===a?"outline":a,s=Object(_.a)(t,p);return Object(u.jsx)("div",Object(l.a)(Object(l.a)({},s),{},{className:"button button_".concat(n," ").concat(c),children:e}))},j=c.p+"static/media/logo.49776df1.png",b=c.p+"static/media/cart.dd75d311.png",h=function(){Object(o.b)();var t=Object(o.c)((function(t){return t.newTotal}));return Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)(r.b,{exact:!0,to:"/",children:Object(u.jsxs)("div",{className:"logo",children:[Object(u.jsx)("img",{src:j,className:"logo__img",alt:"logo"}),Object(u.jsx)("span",{className:"logo__name",children:"React Pizza"})]})}),Object(u.jsx)(r.b,{exact:!0,to:"/",children:Object(u.jsx)("span",{className:"menu-item",children:"\u041a\u0430\u0442\u043e\u043b\u043e\u0433"})}),Object(u.jsx)(r.b,{exact:!0,to:"/cart",children:Object(u.jsxs)(m,{className:"cart",children:[Object(u.jsx)("img",{className:"cart__img",src:b,alt:"cart-img"}),Object(u.jsxs)("span",{className:"total",children:[t," \u0440."]})]})})]})},O=function(t){var e=t.name,c=t.img,a=t.id,n=t.price,s=Object(o.b)();return Object(u.jsxs)("div",{className:"product",children:[Object(u.jsx)("img",{className:"product__img",src:c,alt:e}),Object(u.jsxs)("div",{className:"product__content",children:[Object(u.jsx)("h3",{className:"product__name",children:e}),Object(u.jsxs)(m,{className:"product__price",onClick:function(){return function(t){s({type:"ADD_TO_CART",payload:t})}(a)},type:"outline",children:[n," \u0440."]})]})]})},g=function(t){var e=t.name,c=t.img,a=t.id,n=t.price,s=t.amount,i=Object(o.b)();return Object(u.jsxs)("div",{className:"product__cart",children:[Object(u.jsx)("img",{className:"product__img",src:c,alt:e}),Object(u.jsx)("div",{className:"product__content",children:Object(u.jsx)("h3",{className:"product__name",children:e})}),Object(u.jsxs)("div",{className:"product__control",children:[Object(u.jsx)(m,{onClick:function(){return function(t){i({type:"REMOVE_FROM_CART",payload:t})}(a)},children:"-"}),Object(u.jsxs)(m,{className:"product__price",onClick:function(){return console.log("amount: "+s)},type:"outline",children:[s||0," | ",n*s," \u0440."]}),Object(u.jsx)(m,{onClick:function(){return function(t){i({type:"ADD_TO_CART",payload:t})}(a)},children:"+"})]})]})},x=function(){var t=Object(o.c)((function(t){return t.newTotal})),e=Object(o.c)((function(t){return t.total})),c=Object(o.c)((function(t){return t.discounts})),a=Object(o.c)((function(t){return t.delivery}));return Object(u.jsx)("div",{className:"form-block",children:Object(u.jsxs)("form",{className:"form-cart",action:"/",method:"POST",children:[Object(u.jsx)("input",{id:"city",type:"text",name:"city",placeholder:"\u0413\u043e\u0440\u043e\u0434"}),Object(u.jsx)("input",{id:"adress",type:"text",name:"adress",placeholder:"\u0410\u0434\u0440\u0435\u0441"}),Object(u.jsx)("input",{id:"date",type:"date",name:"date",min:function(){var t=new Date;return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}()}),Object(u.jsx)("input",{type:"time",name:"time"}),Object(u.jsxs)("p",{className:"discounts",children:[c.filter((function(t){return t.used})).length?"\u0411\u044b\u043b\u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u044b \u0441\u043a\u0438\u0434\u043a\u0438:":"\u0414\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u043a\u0438\u0434\u043e\u043a \u0437\u0430\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0430 \u0431\u043e\u043b\u044c\u0448\u0443\u044e \u0441\u0443\u043c\u043c\u0443",c.map((function(t,e){if(t.used)return Object(u.jsxs)("p",{children:[e+1,". ",t.text]},t.id)})),Object(u.jsxs)("p",{className:"devilery-desc",children:["\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 ",a.used?a.sum:0,"\u0440. \u0414\u043b\u044f \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0439 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0437\u0430\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0430 \u0441\u0443\u043c\u043c\u0443 \u043e\u0442 1000\u0440 \u0431\u0435\u0437 \u0443\u0447\u0435\u0442\u0430 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438."]})]}),Object(u.jsxs)("p",{className:"total-text",children:["\u0421\u0443\u043c\u043c\u0430 \u043a \u043e\u043f\u043b\u0430\u0442\u0435 ",Object(u.jsxs)("span",{className:"total-price",children:[t," \u0440."]}),c.filter((function(t){return t.used})).length?Object(u.jsxs)("span",{className:"total-old-price",children:[e," \u0440."]}):""]}),Object(u.jsx)(m,{type:"fill",children:"\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c"})]})})},f=function(){var t=Object(o.c)((function(t){return t.cart}));return Object(u.jsx)(u.Fragment,{children:t.length>0?Object(u.jsxs)("main",{className:"main cart__content",children:[t.map((function(t){if(t)return Object(u.jsx)(g,Object(l.a)({},t),t.id)})),Object(u.jsx)(x,{})]}):Object(u.jsx)("main",{className:"main cart__content",children:Object(u.jsx)("h2",{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"})})})},y=function(){var t=Object(o.c)((function(t){return t.products}));return Object(u.jsxs)("main",{className:"main",children:[Object(u.jsx)("h2",{children:"\u041f\u0438\u0446\u0446\u0430"}),Object(u.jsx)("div",{className:"product__list",children:t.map((function(t){if("PIZZA"===t.type)return Object(u.jsx)(O,Object(l.a)({},t),t.id)}))}),Object(u.jsx)("h2",{children:"\u041a\u0443\u0440\u0438\u0446\u0430"}),Object(u.jsx)("div",{className:"product__list",children:t.map((function(t){if("CHIKEN"===t.type)return Object(u.jsx)(O,Object(l.a)({},t),t.id)}))})]})};var v=function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return t})),c=function t(){console.log(e),localStorage.setItem("state",JSON.stringify(e)),window.removeEventListener("beforeunload",t)};return Object(a.useEffect)((function(){c()}),[e]),Object(a.useEffect)((function(){return t({type:"SET_STATE",payload:JSON.parse(localStorage.getItem("state"))}),function(){c()}}),[]),Object(u.jsx)(r.a,{children:Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)("div",{className:"wrapper",children:[Object(u.jsx)(h,{}),Object(u.jsxs)(d.c,{children:[Object(u.jsx)(d.a,{exact:"true",path:"/",element:Object(u.jsx)(y,{})}),Object(u.jsx)(d.a,{exact:"true",path:"/cart",element:Object(u.jsx)(f,{})})]})]})})})},N=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,30)).then((function(e){var c=e.getCLS,a=e.getFID,n=e.getFCP,s=e.getLCP,i=e.getTTFB;c(t),a(t),n(t),s(t),i(t)}))},T=c(12),A=c(15),z={cart:[],total:0,newTotal:0,delivery:{sum:300,used:!1},discounts:[{id:"1disc",type:"sum",sum:300,condition:1e3,used:!1,text:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043e\u0442 1000\u0440. \u0411\u0415\u0421\u041f\u041b\u0410\u0422\u041d\u0410"},{id:"2disc",type:"percent",sum:10,condition:2e3,used:!1,text:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430 \u043e\u0442 2000\u0440. \u0434\u0430\u0435\u0442 \u0441\u043a\u0438\u0434\u043a\u0443 10%"}],products:[{id:1,type:"PIZZA",name:"\u041f\u0438\u0446\u0446\u0430 \u041f\u0435\u043f\u043f\u0435\u0440\u043e\u043d\u0438",price:299,img:"https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/477350/dish_large_______-____-1023x432-pizza-full_0005__________.png"},{id:2,type:"PIZZA",name:"\u041f\u0438\u0446\u0446\u0430 4 \u0421\u044b\u0440\u0430",price:699,img:"https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/477351/dish_large_______-____-1023x432-pizza-full_0004_______.png"},{id:3,type:"PIZZA",name:"\u041f\u0438\u0446\u0446\u0430 \u0411\u0430\u0432\u0430\u0440\u0441\u043a\u0430\u044f",price:499,img:"https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/479638/dish_large_______-____-1023x432-pizza-full_0006__________.jpg"},{id:4,type:"PIZZA",name:"\u041f\u0438\u0446\u0446\u0430 \u0413\u0440\u0435\u0447\u0435\u0441\u043a\u0430\u044f",price:699,img:"https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/477353/dish_large_______-____-1023x432-_________-UPD2.png"},{id:5,type:"PIZZA",name:"\u041f\u0438\u0446\u0446\u0430 \u0425\u043e\u0442-\u0414\u043e\u0433",price:599,img:"https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/477354/dish_large_______-____-1023x432-___-___-UPD.png"},{id:6,type:"PIZZA",name:"\u041f\u0438\u0446\u0446\u0430 2 \u0432 1",price:899,img:"https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/479635/dish_large_______-____-1023x432-pizza-2-in-1.jpg"},{id:7,type:"PIZZA",name:"\u041f\u0438\u0446\u0446\u0430 \u0414\u0435\u0440\u0435\u0432\u0435\u043d\u0441\u043a\u0430\u044f",price:499,img:"https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/479637/dish_large_______-____-1023x432-pizza-full_0002____________-_-_______.jpg"},{id:8,type:"CHIKEN",name:"\u0424\u0438\u043b\u0435 \u043a\u0443\u0440\u0438\u043d\u043e\u0435 3 \u0448\u0442",price:149,img:"https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/477338/dish_large________-____-3__.jpg"},{id:9,type:"CHIKEN",name:"\u041d\u0430\u0433\u0433\u0435\u0442\u0441\u044b \u043a\u0443\u0440\u0438\u043d\u044b\u0435 5 \u0448\u0442",price:99,img:"https://smartomato.ams3.cdn.digitaloceanspaces.com/uploads/media/photo/477340/dish_large_________-5__.jpg"}]};function E(t,e,c){var a=t,n=e.discounts;return n.forEach((function(n){c.length>0?("sum"===n.type&&(a>=n.condition?(n.used=!0,e.delivery.used=!1):a<n.condition&&(a+=e.delivery.sum,e.delivery.used=!0,n.used=!1)),"percent"===n.type&&(a>=n.condition?(a-=Math.floor(a/100*n.sum),n.used=!0):a<n.condition&&(n.used=!1)),console.log("prev total: "+t),console.log("new total: "+a)):0===c.length&&(e.delivery.used=!1)})),{total:a,discounts:n}}var Z=Object(T.createStore)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_TO_CART":var c=t.products.find((function(t){return t.id===e.payload})),a=t.cart,n=a.find((function(t){return t.id===e.payload}));n?n.amount+=1:(c.amount=1,a.push(c));var s=t.total+c.price,i=E(s,t,a);return Object(l.a)(Object(l.a)({},t),{},{cart:a,total:s,newTotal:i.total,discounts:i.discounts});case"REMOVE_FROM_CART":var o=t.products.find((function(t){return t.id===e.payload})),r=t.cart;r=(r=r.map((function(t){if(t.id===e.payload){if(t.amount>0)return--t.amount,t;if(t.amount<=1)return}return t}))).filter((function(t){if(t)return t.id!==e.payload||0!==t.amount})),console.log(r);var d=t.total-o.price,_=E(d,t,r);return Object(l.a)(Object(l.a)({},t),{},{cart:r,total:d,newTotal:_.total,discounts:_.discounts});case"SET_STATE":return console.log(e.payload),e.payload?Object(l.a)({},e.payload):Object(l.a)({},t);default:return t}}),Object(A.composeWithDevTools)());i.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(o.a,{store:Z,children:Object(u.jsx)(v,{})})}),document.getElementById("root")),N()},8:function(t,e,c){}},[[29,1,2]]]);
//# sourceMappingURL=main.4b34c577.chunk.js.map